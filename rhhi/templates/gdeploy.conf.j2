#gdeploy configuration generated by cockpit-gluster plugin
[hosts]
{{node1_gluster_fqdn}}
{{node2_gluster_fqdn}}
{{node3_gluster_fqdn}}

[service1]
action=enable
service=chronyd

[service2]
action=restart
service=chronyd

[shell2]
action=execute
command=vdsm-tool configure --force

[script3]
action=execute
file=/usr/share/gdeploy/scripts/blacklist_all_disks.sh
ignore_script_errors=no

[pv1]
action=create
devices={{disk_for_storage_domain_engine}}
ignore_pv_errors=no

[pv2]
action=create
devices={{disk_for_storage_domain_2}}
ignore_pv_errors=no

[pv3]
action=create
devices={{disk_for_storage_domain_3}}
ignore_pv_errors=no

[vg1]
action=create
vgname=gluster_vg_{{disk_for_storage_domain_engine}}
pvname={{disk_for_storage_domain_engine}}
ignore_vg_errors=no

[vg2]
action=create
vgname=gluster_vg_{{disk_for_storage_domain_2}}
pvname={{disk_for_storage_domain_2}}
ignore_vg_errors=no

[vg3]
action=create
vgname=gluster_vg_{{disk_for_storage_domain_3}}
pvname={{disk_for_storage_domain_3}}
ignore_vg_errors=no

[lv1]
action=create
poolname=gluster_thinpool_{{disk_for_storage_domain_2}}
ignore_lv_errors=no
vgname=gluster_vg_{{disk_for_storage_domain_2}}
lvtype=thinpool
size={{disk_size_of_domain_2}}
poolmetadatasize=2GB

[lv2]
action=create
poolname=gluster_thinpool_{{disk_for_storage_domain_3}}
ignore_lv_errors=no
vgname=gluster_vg_{{disk_for_storage_domain_3}}
lvtype=thinpool
size={{disk_size_of_domain_3}}
poolmetadatasize=2GB

[lv3]
action=create
lvname=gluster_lv_engine
ignore_lv_errors=no
vgname=gluster_vg_{{disk_for_storage_domain_engine}}
mount=/gluster_bricks/engine
size={{disk_size_of_engine}}
lvtype=thick

[lv4]
action=create
lvname=gluster_lv_{{storage_domain_name_2}}
ignore_lv_errors=no
vgname=gluster_vg_{{disk_for_storage_domain_2}}
mount=/gluster_bricks/{{storage_domain_name_2}}
lvtype=thinlv
poolname=gluster_thinpool_{{disk_for_storage_domain_2}}
virtualsize={{disk_size_of_domain_2}}

[lv5]
action=create
lvname=gluster_lv_{{storage_domain_name_3}}
ignore_lv_errors=no
vgname=gluster_vg_{{disk_for_storage_domain_3}}
mount=/gluster_bricks/{{storage_domain_name_3}}
lvtype=thinlv
poolname=gluster_thinpool_{{disk_for_storage_domain_3}}
virtualsize={{disk_size_of_domain_3}}

[service3]
action=restart
service=glusterd
slice_setup=yes

[firewalld]
action=add
ports=111/tcp,2049/tcp,54321/tcp,5900/tcp,5900-6923/tcp,5666/tcp,16514/tcp,54322/tcp
services=glusterfs

[script2]
action=execute
file=/usr/share/gdeploy/scripts/disable-gluster-hooks.sh

[shell3]
action=execute
command=usermod -a -G gluster qemu

[volume1]
action=create
volname=engine
transport=tcp
replica=yes
replica_count=3
key=group,storage.owner-uid,storage.owner-gid,network.ping-timeout,performance.strict-o-direct,network.remote-dio,cluster.granular-entry-heal
value=virt,36,36,30,on,off,enable
brick_dirs={{node1_gluster_fqdn}}:/gluster_bricks/engine/engine,{{node2_gluster_fqdn}}:/gluster_bricks/engine/engine,{{node3_gluster_fqdn}}:/gluster_bricks/engine/engine
ignore_volume_errors=no

[volume2]
action=create
volname={{storage_domain_name_2}}
transport=tcp
replica=yes
replica_count=3
key=group,storage.owner-uid,storage.owner-gid,network.ping-timeout,performance.strict-o-direct,network.remote-dio,cluster.granular-entry-heal
value=virt,36,36,30,on,off,enable
brick_dirs={{node1_gluster_fqdn}}:/gluster_bricks/{{storage_domain_name_2}}/{{storage_domain_name_2}},{{node2_gluster_fqdn}}:/gluster_bricks/{{storage_domain_name_2}}/{{storage_domain_name_2}},{{node3_gluster_fqdn}}:/gluster_bricks/{{storage_domain_name_2}}/{{storage_domain_name_2}}
ignore_volume_errors=no

[volume3]
action=create
volname={{storage_domain_name_3}}
transport=tcp
replica=yes
replica_count=3
key=group,storage.owner-uid,storage.owner-gid,network.ping-timeout,performance.strict-o-direct,network.remote-dio,cluster.granular-entry-heal
value=virt,36,36,30,on,off,enable
brick_dirs={{node1_gluster_fqdn}}:/gluster_bricks/{{storage_domain_name_3}}/{{storage_domain_name_3}},{{node2_gluster_fqdn}}:/gluster_bricks/{{storage_domain_name_3}}/{{storage_domain_name_3}},{{node3_gluster_fqdn}}:/gluster_bricks/{{storage_domain_name_3}}/{{storage_domain_name_3}}
ignore_volume_errors=no
